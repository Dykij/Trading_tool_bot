# Журнал изменений (Changelog)

Все значимые изменения в проекте DMarket Trading Bot будут документироваться в этом файле.

Формат основан на [Keep a Changelog](https://keepachangelog.com/ru/1.0.0/),
и этот проект придерживается [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased] - 2025-04-15

### Добавлено
- Механизм перенаправления импортов для обеспечения обратной совместимости после удаления устаревших модулей

### Изменено
- Оптимизирована структура проекта для улучшения организации кода

### Удалено
- Удалены устаревшие модули-заглушки из корневой директории (`bellman_ford.py`, `linear_programming.py`, `ml_predictor.py`, `api_wrapper.py`)
- Удалены временные файлы и скрипты
  
### Исправлено
- Добавлена полноценная реализация функции `find_all_arbitrage_opportunities_async` в модуль `bellman_ford.py`

## [Неопубликовано]

### Добавлено
- Полная документация проекта
- Руководство по установке
- API документация
- Руководство разработчика
- Инструкции по тестированию
- FAQ для решения распространенных проблем
- Журнал изменений

## [1.0.0] - 2025-04-03

### Добавлено
- Основной функционал торгового бота
- Интеграция с API DMarket
- Алгоритм Беллмана-Форда для поиска арбитражных возможностей
- ML-предиктор для прогнозирования цен
- Telegram-бот для управления и мониторинга
- Базовые тесты для основных компонентов
- Скрипты для проверки качества кода
- Скрипты для фиксации общих ошибок

### Изменено
- Улучшена производительность алгоритма Беллмана-Форда
- Оптимизированы запросы к API DMarket

### Исправлено
- Исправлены проблемы с кодировкой в файлах проекта
- Исправлены неиспользуемые импорты
- Исправлены стилистические проблемы в коде

## [0.5.0] - 2025-03-15

### Добавлено
- Прототип торгового бота
- Базовая интеграция с API DMarket
- Сбор данных о ценах предметов
- Простая реализация алгоритма поиска арбитражных возможностей

### Изменено
- Улучшен интерфейс командной строки

### Исправлено
- Исправлены ошибки при сборе данных

## [0.1.0] - 2025-02-01

### Добавлено
- Инициализация проекта
- Базовая структура репозитория
- Скрипт для сбора данных о ценах
- Конфигурационный файл

## 2025-04-13

### Исправления ошибок
- Исправлена синтаксическая ошибка отступа в `price_prediction_model.py` (блок `else` в методе `train()`)
- Исправлена ошибка в тесте `TestSeasonalAnalyzer` с использованием `dayofday` вместо правильного `day_of_year`

### Улучшения кода
- Добавлен метод `prepare_features` в класс `PricePredictor` для подготовки признаков из данных
- Добавлен метод `predict_with_model` в класс `PricePredictor` для прогнозирования цены с использованием модели
- Добавлен метод `calculate_confidence` в класс `PricePredictor` для расчета уровня уверенности в прогнозе

### Зависимости
- Установлены основные библиотеки машинного обучения: scikit-learn, numpy, pandas
- Установлены дополнительные библиотеки для продвинутого ML: tensorflow, torch, prophet
- Установлены библиотеки для бустинга: xgboost, lightgbm, catboost
- Установлены дополнительные утилиты: matplotlib, joblib, statsmodels

### Особые заметки
В выводе тестов все еще есть предупреждения о корутинах, которые не были ожидаемы (not awaited). 
Эти предупреждения можно исправить, добавив `async` к соответствующим тестовым методам и 
запуская их с помощью pytest-asyncio. Для этого потребуется:

1. Установить pytest-asyncio:
```
pip install pytest pytest-asyncio
```

2. Добавить в тестовые методы декоратор `@pytest.mark.asyncio`
3. Запускать тесты с помощью pytest вместо unittest:
```
python -m pytest tests/ml/test_ml_predictor.py -v
```

Все тесты успешно проходят, что подтверждает стабильность и работоспособность модуля машинного обучения.